---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';

export function getStaticPaths() {
  return [
    { params: { slug: "portfolio-website" } },
    { params: { slug: "ecommerce-platform" } },
    { params: { slug: "task-management-app" } },
  ];
}

// Mock data - will be replaced with Strapi API call
const getProject = (slug: string) => {
  const projects: Record<string, any> = {
    "portfolio-website": {
      title: "Portfolio Website",
      date: "2024-03-10",
      description: "A modern portfolio website built with React and TypeScript",
      content: `
        <p>This portfolio website showcases my work and skills as a developer. Built with modern technologies and best practices.</p>
        
        <h2>Technologies Used</h2>
        <ul>
          <li>React</li>
          <li>TypeScript</li>
          <li>Tailwind CSS</li>
          <li>Vite</li>
        </ul>
        
        <h2>Features</h2>
        <p>The website includes a responsive design, dark mode support, and smooth animations throughout.</p>
      `
    },
    "ecommerce-platform": {
      title: "E-commerce Platform",
      date: "2024-02-15",
      description: "A full-featured e-commerce platform with payment integration",
      content: `
        <p>An e-commerce platform built to handle thousands of products and transactions.</p>
        
        <h2>Technologies Used</h2>
        <ul>
          <li>React</li>
          <li>Node.js</li>
          <li>PostgreSQL</li>
          <li>Stripe</li>
        </ul>
        
        <h2>Features</h2>
        <p>Complete shopping cart, payment processing, and order management system.</p>
      `
    },
    "task-management-app": {
      title: "Task Management App",
      date: "2024-01-05",
      description: "A collaborative task management application",
      content: `
        <p>A task management app for teams to organize and track their work.</p>
        
        <h2>Technologies Used</h2>
        <ul>
          <li>React</li>
          <li>Firebase</li>
          <li>Material-UI</li>
        </ul>
        
        <h2>Features</h2>
        <p>Real-time collaboration, drag-and-drop interface, and team management.</p>
      `
    }
  };
  return projects[slug] || null;
};

const { slug } = Astro.params;
const project = getProject(slug || "");

if (!project) {
  return Astro.redirect('/404');
}
---

<BaseLayout title={`${project.title} - Carlos Gutierrez`}>
  <div class="min-h-screen bg-background">
    <Header />
    
    <main class="max-w-3xl mx-auto px-6 pt-32 pb-16">
      <a 
        href="/projects"
        class="inline-flex items-center gap-2 text-sm font-medium text-foreground hover:text-primary transition-colors mb-8"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Back to Projects
      </a>

      <article>
        <header class="mb-8">
          <h1 class="text-4xl font-bold text-primary mb-4">{project.title}</h1>
          <time class="text-sm text-muted-foreground mb-4 block">{project.date}</time>
          {project.description && (
            <p class="text-lg text-foreground">{project.description}</p>
          )}
        </header>

        <div 
          class="prose prose-invert max-w-none"
          set:html={project.content}
        />
      </article>
    </main>
  </div>
</BaseLayout>

